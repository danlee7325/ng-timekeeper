<div class="schedule-container">
    <h1 class="schedule-list-title">Schedules</h1>

    <table mat-table [dataSource]="schedules">
        <!-- Name Column -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <!-- Category Column -->
        <ng-container matColumnDef="category">
            <th mat-header-cell *matHeaderCellDef> Category </th>
            <td mat-cell *matCellDef="let element"> {{ element.category }} </td>
        </ng-container>

        <!-- Start Time Column -->
        <ng-container matColumnDef="startTime">
            <th mat-header-cell *matHeaderCellDef> Start Time </th>
            <td mat-cell *matCellDef="let element"> {{ element.startTime | date: 'MMM d, y, h:mm:ss a' }} </td>
        </ng-container>

        <!-- End Time Column -->
        <ng-container matColumnDef="endTime">
            <th mat-header-cell *matHeaderCellDef> End Time </th>
            <td mat-cell *matCellDef="let element; let i = index;" [ngClass]="{ 'center-icon': isScheduleRunning && i === schedules.length - 1 }">
                <span *ngIf="!isScheduleRunning || (isScheduleRunning && i !== schedules.length - 1)">{{ element.endTime | date: 'MMM d, y, h:mm:ss a' }}</span>
                <span *ngIf="isScheduleRunning && i === schedules.length - 1"><fa-icon [icon]="faSpinner" [spin]="true"></fa-icon></span>
            </td>
        </ng-container>

        <!-- Duration Column -->
        <ng-container matColumnDef="duration">
            <th mat-header-cell *matHeaderCellDef> Duration </th>
            <td mat-cell *matCellDef="let element"> {{ element | scheduleDuration }} </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>
                <div class="schedule-header">
                    <div *ngIf="!isScheduleRunning" (click)="startSchedule()" class="start-schedule-container">
                        <a routerLink="" class="schedule-link">
                            <mat-icon>start</mat-icon>
                            <div class="schedule-text"> Start Schedule </div>
                        </a>
                    </div>
                    <div *ngIf="isScheduleRunning" (click)="endSchedule()" class="start-schedule-container">
                        <a routerLink="" class="schedule-link">
                            <mat-icon>start</mat-icon>
                            <div class="schedule-text"> End Schedule</div>
                        </a>
                    </div>
                    <div class="add-schedule-container">
                        <a routerLink="" class="schedule-link" (click)="openAdd()">
                            <mat-icon>add</mat-icon>
                            <div class="schedule-text"> Add Schedule </div>
                        </a>
                    </div>
                </div>
            </th>
            <td mat-cell *matCellDef="let element; let i = index;" class="edit-cell">
                <a *ngIf="!isScheduleRunning || (isScheduleRunning && i !== schedules.length - 1)" routerLink="" (click)="openEdit(element)">Edit</a>
                <a *ngIf="!isScheduleRunning || (isScheduleRunning && i !== schedules.length - 1)" routerLink="" (click)="deleteSchedule(i)" class="delete-icon"><mat-icon>delete</mat-icon></a>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
</div>